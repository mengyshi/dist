"use strict";$(function(){var o;if(localStorage.getItem("loginmessage")){var t=JSON.parse(localStorage.getItem("loginmessage"));console.log("aa"),console.log(t.username),$(".nav-left em").text(t.username).css("color","rgb(229,0,75)"),o=t.token}else alert("您当前处于未登录状态，请先登录！否则将您看中的物品将无法加入购物车！");var s=location.search.split("=")[1];console.log(s),$.get("http://47.104.244.134:8080/goodsbyid.do",{id:s},function(t){console.log(t.name);var s='\n\t\t<div class="detail-title"><a href="index.html">首页</a>>><span>'+t.name+'</span></div>\n\t\t\t<div class="detail-content">\n\t\t\t\t<div class="dc-left">\n\t\t\t\t\t<div class="midbox"><img src="'+t.picurl+'"/><div class="fdj"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="img-list">\n\t\t\t\t\t<img src="'+t.picurl+'"\n\t\t\t\t\t/>\n\t\t\t\t\t<img src="../img/test.jpg"\n\t\t\t\t\t/>\n\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="zoom">\n\t\t\t\t\t<img src="'+t.picurl+'"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="dc-right">\n\t\t\t\t\t<p><span></span>日本直供 青岛一号仓发货</p>\n\t\t\t\t\t<p><strong>'+t.name+'</strong></p>\n\t\t\t\t\t<p>价格<span style="color:rgb(229,0,75);font-size:22px">'+t.price+"</span>元</p>\n\t\t\t\t\t<p>原价<span >"+(t.price-100+200)+'</span>元<span>为您节省100元</span></p>\n\t\t\t\t\t<p>税费 <span>本商品适用税率为11.2%</span> <span>税费收取规则</span> </p>\n\t\t\t\t\t<div class="transport">运费  <span>至 <select>\n\t\t\t\t\t\t<option>北京市</option>\n\t\t\t\t\t</select></span><span>订单实付满99元包邮</span><span>预计3-5个工作日送达</span></div>\n\t\t\t\t\t<div class="number">购买数量  <button class="minus">-</button><input type="text" value="1"\n\t\t\t\t\t/><button class="plus">+</button> <span>赠送42积分</span></div>\n\t\t\t\t\t<input data-id='+t.id+' class="buygoods" type="button" value="加入购物车" />\n\t\t\t\t\t<div class="khd"><span></span>客户端下单</div> <span>收藏商品</span>\n\t\t\t\t\t\n\t\t\t</div>\n\t\t';$(".detail").html(s),$(".plus").click(function(){var t=$(".plus").prev().val();console.log(t),$(".plus").prev().val(Number(t)+1)}),$(".minus").click(function(){var t=$(".minus").next().val();console.log(t),t<=1?$(".minus").next().val(1):$(".minus").next().val(t-1)}),$(".midbox").on("mouseover",function(){$(".zoom").css("display","block"),$(".fdj").css("display","block")}),$(".midbox").on("mouseout",function(){$(".zoom").css("display","none"),$(".fdj").css("display","none")}),$(".midbox").on("mousemove",function(t){var s=t||event,n=s.pageX-$(".fdj")[0].offsetWidth/2,o=s.pageY-$(".fdj")[0].offsetHeight/2;console.log($(".fdj")[0].offsetWidth/2);var i=$(".midbox")[0].offsetWidth-$(".fdj")[0].offsetWidth,e=$(".midbox")[0].offsetHeight-$(".fdj")[0].offsetHeight;n=n<=0?0:i<=n?i:n,o=o<=0?0:e<=o?e:o,$(".fdj").css({left:n+"px",top:o+"px"}),$(".zoom").children().css({left:-n/$(".midbox")[0].offsetWidth*$(".zoom")[0].offsetWidth+"px",top:-o/$(".midbox")[0].offsetHeight*$(".zoom")[0].offsetHeight+"px"})});for(var n=0;n<$(".img-list img").length;n++)$(".img-list img").eq(n).click(function(){console.log($(".midbox img").attr("src")),$(".midbox img").attr("src",$(this).attr("src")),$(".zoom img").attr("src",$(this).attr("src"))});$.get("http://47.104.244.134:8080/cartlist.do",{token:o},function(t){$(".middle-cart .cart_no").text(t.length),console.log(t.length)}),$(".buygoods").click(function(){var t=$(this).attr("data-id");$.post("http://47.104.244.134:8080/cartsave.do",{gid:t,token:o},function(t){console.log(t),$.get("http://47.104.244.134:8080/cartlist.do",{token:o},function(t){$(".middle-cart .cart_no").text(t.length)})})})})});